<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-9647203919767860">
    <title>저녁 메뉴 추천</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9647203919767860" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JFGEY3B4M3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-JFGEY3B4M3');
    </script>
    <header>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#dinner-recommender">Dinner Recommender</a></li>
                <li><a href="#animal-face-test">Animal Face Test</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
        <div id="top-right-controls">
            <div id="theme-toggle-container">
                <button id="theme-toggle"></button>
            </div>
            <div id="lang-toggle-container">
                <button id="lang-toggle">EN</button>
            </div>
        </div>
    </header>
    <main>
        <h1>Welcome to our Fun Tools!</h1>
        <p>Discover fun and interactive tools to make your day more interesting. Try our dinner recommender or see what animal you look like!</p>
        <div id="main-content">
            <section id="dinner-recommender">
                <h2>Dinner Recommender</h2>
                <p>Can't decide what to eat? Let us help! Click the button to get a random dinner recommendation.</p>
                <menu-recommender></menu-recommender>
            </section>

            <section id="contact">
                <h2>제휴 문의</h2>
                <form action="https://formspree.io/f/mgolwlwb" method="POST">
                    <label for="name">이름:</label>
                    <input type="text" id="name" name="name" required>
                    
                    <label for="email">이메일:</label>
                    <input type="email" id="email" name="email" required>
                    
                    <label for="message">메시지:</label>
                    <textarea id="message" name="message" rows="5" required></textarea>
                    
                    <button type="submit">문의 제출</button>
                </form>
            </section>
        </div>
        <script src="main.js"></script>

        <section id="animal-face-test">
            <h2>Animal Face Test</h2>
            <p>Have you ever wondered if you look more like a cat or a dog? This tool uses your webcam and a machine learning model to determine your animal face type. It's just for fun, so give it to a try!</p>
            <div>Teachable Machine Image Model</div>
            <button type="button" id="start-webcam-tm-button">웹캠 시작</button>
            <div id="webcam-container"></div>
            <div id="label-container"></div>
        </section>

        <div id="disqus_thread"></div>
    </main>
    <footer>
        <p>&copy; 2026 Fun Tools. All Rights Reserved.</p>
        <p><a href="/privacy.html">Privacy Policy</a> | <a href="/terms.html">Terms of Service</a></p>
    </footer>
    <script>
        // disqus_config를 전역으로 선언하여 Disqus 스크립트가 접근할 수 있도록 함
        var disqus_config = function () {
            this.page.url = window.location.href;  // 현재 페이지 URL 사용
            this.page.identifier = 'makeit_dinner_recommender'; // 고유 식별자 설정
        };
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://makeit-1.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    <!-- Teachable Machine Scripts - Place at the very end of body -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
    <script type="text/javascript">
        const URL_TM = "https://teachablemachine.withgoogle.com/models/8imuPmC68/";

        let model_tm, webcam_tm, labelContainer_tm, maxPredictions_tm;

        async function init_tm() {
            const modelURL = URL_TM + "model.json";
            const metadataURL = URL_TM + "metadata.json";

            model_tm = await tmImage.load(modelURL, metadataURL);
            maxPredictions_tm = model_tm.getTotalClasses();

            const flip = true;
            webcam_tm = new tmImage.Webcam(200, 200, flip);
            await webcam_tm.setup();
            await webcam_tm.play();
            window.requestAnimationFrame(loop_tm);

            document.getElementById("webcam-container").appendChild(webcam_tm.canvas);
            labelContainer_tm = document.getElementById("label-container");
            for (let i = 0; i < maxPredictions_tm; i++) {
                labelContainer_tm.appendChild(document.createElement("div"));
            }
        }

        async function loop_tm() {
            webcam_tm.update();
            await predict_tm();
            window.requestAnimationFrame(loop_tm);
        }

        async function predict_tm() {
            const prediction = await model_tm.predict(webcam_tm.canvas);
            for (let i = 0; i < maxPredictions_tm; i++) {
                const classPrediction =
                    prediction[i].className + ": " + prediction[i].probability.toFixed(2);
                labelContainer_tm.childNodes[i].innerHTML = classPrediction;
            }
        }
    </script>
</body>
</html>

